<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ğŸ¯ Ø­ÙŠÙˆØ§Ù† Ø¬Ù…Ø§Ø¯ Ù†Ø¨Ø§Øª</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding: 20px;
            margin: 0;
        }

        .game-box {
            width: 100%;
            max-width: 700px;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            text-align: center;
        }

        h2 {
            margin-bottom: 10px;
            color: #f5576c;
            font-size: 28px;
        }

        .players-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .player {
            text-align: center;
            flex: 1;
        }

        .player-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
            font-size: 16px;
        }

        .player-score {
            font-size: 20px;
            font-weight: bold;
            color: #f5576c;
            margin: 5px 0;
        }

        .player-status {
            font-size: 12px;
            color: #666;
        }

        .round-indicator {
            background: #6c757d;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 15px;
        }

        .challenge-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
            color: white;
        }

        .letter {
            font-size: 80px;
            font-weight: bold;
            margin: 10px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .category {
            font-size: 24px;
            margin-top: 10px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .input-group {
            text-align: right;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #333;
        }

        input[type="text"] {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            outline: none;
            transition: all 0.3s;
        }

        input:focus {
            border-color: #f5576c;
            box-shadow: 0 0 0 3px rgba(245, 87, 108, 0.1);
        }

        input:disabled {
            background: #f0f0f0;
            cursor: not-allowed;
        }

        button {
            margin-top: 15px;
            width: 100%;
            padding: 15px;
            background: #f5576c;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:hover:not(:disabled) {
            background: #e04658;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        button.secondary {
            background: #888;
            margin-top: 10px;
        }

        button.secondary:hover {
            background: #666;
        }

        button.danger {
            background: #dc3545;
            margin-top: 10px;
        }

        button.danger:hover {
            background: #c82333;
        }

        .result-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: right;
        }

        .result-item {
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .result-item.correct {
            background: #d4edda;
            color: #155724;
        }

        .result-item.wrong {
            background: #f8d7da;
            color: #721c24;
        }

        .result-item.empty {
            background: #fff3cd;
            color: #856404;
        }

        .winner {
            font-size: 24px;
            margin-top: 15px;
            font-weight: bold;
            padding: 15px;
            border-radius: 8px;
        }

        .winner.win {
            color: #28a745;
            background: #d4edda;
        }

        .winner.lose {
            color: #dc3545;
            background: #f8d7da;
        }

        .winner.draw {
            color: #ffc107;
            background: #fff3cd;
        }

        .game-over {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 2px solid #f5576c;
        }

        .game-over h3 {
            color: #f5576c;
            margin-bottom: 15px;
        }

        .final-result {
            font-size: 32px;
            font-weight: bold;
            margin: 15px 0;
        }

        .final-result.win {
            color: #28a745;
        }

        .final-result.lose {
            color: #dc3545;
        }

        .final-result.draw {
            color: #ffc107;
        }

        @media (max-width: 600px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

<div class="game-box">
    <h2>ğŸ¯ Ø­ÙŠÙˆØ§Ù† Ø¬Ù…Ø§Ø¯ Ù†Ø¨Ø§Øª</h2>

    <div class="round-indicator" id="roundIndicator">Ø§Ù„Ø¬ÙˆÙ„Ø© 1 / 5</div>

    <div class="players-info">
        <div class="player">
            <div class="player-name" id="myName">Ø£Ù†Ø§</div>
            <div class="player-score" id="myScore">0</div>
            <div class="player-status" id="myStatus">Ø¬Ø§Ù‡Ø²</div>
        </div>
        <div class="player">
            <div class="player-name" id="opponentName">Ø§Ù„Ø®ØµÙ…</div>
            <div class="player-score" id="opponentScore">0</div>
            <div class="player-status" id="opponentStatus">Ø¨Ø§Ù†ØªØ¸Ø§Ø±...</div>
        </div>
    </div>

    <div id="gameArea">
        <div class="challenge-box">
            <div class="letter" id="letterBox">ØŸ</div>
            <div class="category" id="categoryBox">Ø§Ù†ØªØ¸Ø±...</div>
        </div>

        <div class="form-grid">
            <div class="input-group">
                <label>ğŸ‘¦ Ø§Ø³Ù… ÙˆÙ„Ø¯</label>
                <input type="text" id="boyName" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯">
            </div>
            <div class="input-group">
                <label>ğŸ‘§ Ø§Ø³Ù… Ø¨Ù†Øª</label>
                <input type="text" id="girlName" placeholder="Ù…Ø«Ø§Ù„: Ø¢ÙŠØ©">
            </div>
            <div class="input-group">
                <label>ğŸ¦ Ø­ÙŠÙˆØ§Ù†</label>
                <input type="text" id="animal" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø³Ø¯">
            </div>
            <div class="input-group">
                <label>ğŸŒ³ Ù†Ø¨Ø§Øª</label>
                <input type="text" id="plant" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø±Ø²">
            </div>
            <div class="input-group">
                <label>ğŸº Ø¬Ù…Ø§Ø¯</label>
                <input type="text" id="object" placeholder="Ù…Ø«Ø§Ù„: Ø¥Ø¨Ø±Ø©">
            </div>
            <div class="input-group">
                <label>ğŸŒ Ø¨Ù„Ø§Ø¯</label>
                <input type="text" id="country" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„Ø£Ø±Ø¯Ù†">
            </div>
        </div>

        <button id="submitBtn" onclick="sendAnswers()">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª</button>

        <div id="resultBox" style="display:none;"></div>
        <div class="winner" id="winnerBox" style="display:none;"></div>
    </div>

    <div id="gameOverBox" class="game-over" style="display:none;">
        <h3>ğŸ Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!</h3>
        <div class="final-score">
            <div><strong id="myFinalName">Ø£Ù†Øª</strong>: <span id="myFinalScore">0</span></div>
            <div><strong id="opFinalName">Ø§Ù„Ø®ØµÙ…</strong>: <span id="opFinalScore">0</span></div>
        </div>
        <div class="final-result" id="finalResult"></div>
    </div>

    <button class="danger" id="endGameBtn" onclick="endGame()">Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
    <button class="secondary" onclick="location.href='index.html'">Ø±Ø¬ÙˆØ¹ Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
</div>

<script>

const API_URL = "https://6914f7e23746c71fe04a2ac4.mockapi.io/users";
const MAX_ROUNDS = 5;

// Ø§Ù„Ø­Ø±ÙˆÙ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©
const ARABIC_LETTERS = ['Ø§', 'Ø¨', 'Øª', 'Ø«', 'Ø¬', 'Ø­', 'Ø®', 'Ø¯', 'Ø°', 'Ø±', 'Ø²', 'Ø³', 'Ø´', 'Øµ', 'Ø¶', 'Ø·', 'Ø¸', 'Ø¹', 'Øº', 'Ù', 'Ù‚', 'Ùƒ', 'Ù„', 'Ù…', 'Ù†', 'Ù‡', 'Ùˆ', 'ÙŠ'];

// Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø© - Ø´Ø§Ù…Ù„Ø©
const VALID_ANSWERS = {
    'Ø§': {
        boyNames: ['Ø£Ø­Ù…Ø¯', 'Ø£Ù…ÙŠØ±', 'Ø£ÙŠÙ…Ù†', 'Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…', 'Ø¥Ø³Ù„Ø§Ù…', 'Ø£Ø³Ø§Ù…Ø©', 'Ø£Ù†Ø³', 'Ø¥ÙŠØ§Ø¯', 'Ø£Ø¯Ù‡Ù…', 'Ø¥Ø³Ù…Ø§Ø¹ÙŠÙ„', 'Ø£Ø¯ÙŠØ¨', 'Ø£Ø±ÙƒØ§Ù†', 'Ø¥Ù„ÙŠØ§Ø³', 'Ø£Ù…Ø¬Ø¯'],
        girlNames: ['Ø¢ÙŠØ©', 'Ø£Ù…Ù„', 'Ø¥ÙŠÙ…Ø§Ù†', 'Ø£Ø³Ù…Ø§Ø¡', 'Ø¢Ù„Ø§Ø¡', 'Ø£Ù…ÙŠØ±Ø©', 'Ø¥Ø³Ø±Ø§Ø¡', 'Ø£Ø±ÙŠØ¬', 'Ø¥ÙŠÙ†Ø§Ø³', 'Ø£Ù„ÙŠÙ†', 'Ø¢Ù…Ù†Ø©', 'Ø£Ù…ÙŠÙ†Ø©', 'Ø¥Ù„Ù‡Ø§Ù…', 'Ø£Ù†ÙØ§Ù„'],
        animals: ['Ø£Ø³Ø¯', 'Ø£Ø±Ù†Ø¨', 'Ø¥ÙˆØ²Ø©', 'Ø£ÙØ¹Ù‰', 'Ø£Ø®Ø·Ø¨ÙˆØ·'],
        plants: ['Ø£Ø±Ø²', 'Ø£Ù†Ø§Ù†Ø§Ø³', 'Ø¥Ø¬Ø§Øµ'],
        objects: ['Ø¥Ø¨Ø±Ø©', 'Ø£Ø±ÙŠÙƒØ©', 'Ø£ØµÙŠØµ', 'Ø¥Ù†Ø§Ø¡', 'Ø¥Ø·Ø§Ø±'],
        countries: ['Ø§Ù„Ø£Ø±Ø¯Ù†', 'Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª', 'Ø£Ù…Ø±ÙŠÙƒØ§', 'Ø¥Ø³Ø¨Ø§Ù†ÙŠØ§', 'Ø¥ÙŠØ·Ø§Ù„ÙŠØ§', 'Ø£Ø³ØªØ±Ø§Ù„ÙŠØ§', 'Ø£Ù„Ù…Ø§Ù†ÙŠØ§', 'Ø£ÙØºØ§Ù†Ø³ØªØ§Ù†', 'Ø¥ÙŠØ±Ø§Ù†', 'Ø£ÙˆÙƒØ±Ø§Ù†ÙŠØ§', 'Ø£ÙˆØºÙ†Ø¯Ø§', 'Ø¥Ø«ÙŠÙˆØ¨ÙŠØ§']
    },
    'Ø¨': {
        boyNames: ['Ø¨Ù„Ø§Ù„', 'Ø¨Ø§Ø³Ù„', 'Ø¨Ø´Ø§Ø±', 'Ø¨Ø¯Ø±', 'Ø¨Ø§Ø³Ù…', 'Ø¨ÙƒØ±', 'Ø¨Ø±Ø§Ø¡', 'Ø¨Ù‡Ø§Ø¡'],
        girlNames: ['Ø¨ØªÙˆÙ„', 'Ø¨Ø³Ù…Ø©', 'Ø¨Ø´Ø±Ù‰', 'Ø¨ÙŠØ§Ù†', 'Ø¨Ù„Ù‚ÙŠØ³', 'Ø¨Ø¯ÙˆØ±', 'Ø¨Ø³Ù†Øª', 'Ø¨ÙŠØ³Ø§Ù†'],
        animals: ['Ø¨Ù‚Ø±Ø©', 'Ø¨Ø·Ø©', 'Ø¨Ø¨ØºØ§Ø¡', 'Ø¨Ø¹ÙˆØ¶Ø©', 'Ø¨Ø¬Ø¹Ø©', 'Ø¨ÙˆÙ…Ø©', 'Ø¨ØºÙ„'],
        plants: ['Ø¨Ø·Ø§Ø·Ø³', 'Ø¨ØµÙ„', 'Ø¨Ù‚Ø¯ÙˆÙ†Ø³', 'Ø¨Ø±ØªÙ‚Ø§Ù„', 'Ø¨Ø·ÙŠØ®', 'Ø¨Ø±Ù‚ÙˆÙ‚', 'Ø¨Ø§Ù…ÙŠØ©', 'Ø¨Ø±ÙˆÙƒÙ„ÙŠ', 'Ø¨Ù†Ø¯ÙˆØ±Ø©'],
        objects: ['Ø¨Ø§Ø¨', 'Ø¨Ø·Ø§Ù†ÙŠØ©', 'Ø¨Ø±Ù…ÙŠÙ„', 'Ø¨Ù†Ø¯Ù‚ÙŠØ©', 'Ø¨ÙˆØµÙ„Ø©', 'Ø¨Ø§Ù„ÙˆÙ†', 'Ø¨Ø±Ø§Ø¯', 'Ø¨Ø·Ø§Ù‚Ø©'],
        countries: ['Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§', 'Ø¨Ù„Ø¬ÙŠÙƒØ§', 'Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†', 'Ø¨Ù†ØºÙ„Ø§Ø¯ÙŠØ´', 'Ø¨ÙˆÙ„Ù†Ø¯Ø§', 'Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„', 'Ø¨Ù„ØºØ§Ø±ÙŠØ§', 'Ø¨ÙˆÙ„ÙŠÙÙŠØ§']
    },
    'Øª': {
        boyNames: ['ØªØ§Ù…Ø±', 'ØªÙŠÙ…', 'ØªÙˆÙÙŠÙ‚', 'ØªÙ…ÙŠÙ…', 'ØªØ±ÙƒÙŠ'],
        girlNames: ['ØªØ§Ù„Ø§', 'ØªÙ…Ø§Ø±Ø§', 'ØªØ³Ù†ÙŠÙ…', 'ØªÙ‚Ù‰', 'ØªØ§Ù„Ø©', 'ØªØºØ±ÙŠØ¯', 'ØªÙŠÙ…Ø§Ø¡'],
        animals: ['ØªÙ…Ø³Ø§Ø­', 'ØªÙŠØ³', 'ØªØ±Ø³Ø©'],
        plants: ['ØªÙØ§Ø­', 'ØªÙˆØª', 'ØªÙŠÙ†', 'ØªÙ…Ø±'],
        objects: ['ØªÙ„ÙØ§Ø²', 'ØªÙ„ÙÙˆÙ†', 'ØªØ§Ø¬', 'ØªÙ†ÙˆØ±Ø©', 'ØªØ±Ù…Ø³', 'ØªØ§Ø¨ÙˆØª'],
        countries: ['ØªÙˆÙ†Ø³', 'ØªØ±ÙƒÙŠØ§', 'ØªØ§ÙŠÙ„Ø§Ù†Ø¯', 'ØªÙ†Ø²Ø§Ù†ÙŠØ§', 'ØªØ´ÙŠÙ„ÙŠ']
    },
    'Ø«': {
        boyNames: ['Ø«Ø§Ø¦Ø±', 'Ø«Ø§Ø¨Øª', 'Ø«Ø§Ù…Ø±'],
        girlNames: ['Ø«Ø±ÙŠØ§', 'Ø«Ù†Ø§Ø¡', 'Ø«Ø±Ø§Ø¡'],
        animals: ['Ø«Ø¹Ø¨Ø§Ù†', 'Ø«Ø¹Ù„Ø¨', 'Ø«ÙˆØ±'],
        plants: ['Ø«ÙˆÙ…', 'Ø«Ù…Ø§Ù…'],
        objects: ['Ø«Ù„Ø§Ø¬Ø©', 'Ø«ÙˆØ¨', 'Ø«Ø±ÙŠØ§'],
        countries: []
    },
    'Ø¬': {
        boyNames: ['Ø¬Ù…Ø§Ù„', 'Ø¬Ù„Ø§Ù„', 'Ø¬Ø§Ø¨Ø±', 'Ø¬Ø§Ø³Ù…', 'Ø¬Ù…ÙŠÙ„', 'Ø¬ÙˆØ§Ø¯', 'Ø¬Ø¹ÙØ±', 'Ø¬Ø§Ø¯'],
        girlNames: ['Ø¬Ù†Ù‰', 'Ø¬ÙˆØ¯', 'Ø¬ÙˆØ±ÙŠ', 'Ø¬Ù…ÙŠÙ„Ø©', 'Ø¬Ù†Ø§Ù†', 'Ø¬ÙˆÙ„ÙŠ', 'Ø¬ÙŠÙ‡Ø§Ù†', 'Ø¬Ù…Ø§Ù†Ø©'],
        animals: ['Ø¬Ù…Ù„', 'Ø¬Ø§Ù…ÙˆØ³', 'Ø¬Ø±Ø§Ø¯', 'Ø¬Ø±Ø°'],
        plants: ['Ø¬Ø²Ø±', 'Ø¬Ø±Ø¬ÙŠØ±', 'Ø¬ÙˆØ§ÙØ©', 'Ø¬ÙˆØ² Ù‡Ù†Ø¯'],
        objects: ['Ø¬ÙˆØ§Ù„', 'Ø¬Ø±Ø³', 'Ø¬Ø¯Ø§Ø±', 'Ø¬Ù‡Ø§Ø²', 'Ø¬Ø²Ù…Ø©', 'Ø¬ÙˆØ§Ø±Ø¨'],
        countries: ['Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±', 'Ø¬ÙŠØ¨ÙˆØªÙŠ', 'Ø¬ÙˆØ±Ø¬ÙŠØ§', 'Ø¬Ø§Ù…Ø§ÙŠÙƒØ§']
    },
    'Ø­': {
        boyNames: ['Ø­Ø³Ù†', 'Ø­Ø³ÙŠÙ†', 'Ø­Ù…Ø²Ø©', 'Ø­Ø³Ø§Ù…', 'Ø­Ø§ØªÙ…', 'Ø­Ø°ÙŠÙØ©', 'Ø­Ø§Ø±Ø«', 'Ø­Ù„ÙŠÙ…'],
        girlNames: ['Ø­Ù†Ø§Ù†', 'Ø­Ù„Ø§', 'Ø­Ù†ÙŠÙ†', 'Ø­ÙˆØ±ÙŠØ©', 'Ø­Ø³Ù†Ø§Ø¡', 'Ø­ÙŠØ§Ø©', 'Ø­Ø¨ÙŠØ¨Ø©', 'Ø­Ù…ÙŠØ¯Ø©'],
        animals: ['Ø­ØµØ§Ù†', 'Ø­Ù…Ø§Ø±', 'Ø­Ù…Ø§Ù…Ø©', 'Ø­ÙˆØª', 'Ø­Ù„Ø²ÙˆÙ†', 'Ø­Ø±Ø¨Ø§Ø¡', 'Ø­Ø´Ø±Ø©'],
        plants: ['Ø­Ù…Øµ', 'Ø­Ù†Ø·Ø©'],
        objects: ['Ø­Ø°Ø§Ø¡', 'Ø­Ù‚ÙŠØ¨Ø©', 'Ø­Ø¨Ù„', 'Ø­Ø²Ø§Ù…', 'Ø­Ø¬Ø±', 'Ø­Ù„Ù‚'],
        countries: []
    },
    'Ø®': {
        boyNames: ['Ø®Ø§Ù„Ø¯', 'Ø®Ù„ÙŠÙ„', 'Ø®Ø¶Ø±', 'Ø®Ù„ÙŠÙØ©', 'Ø®Ø·Ø§Ø¨'],
        girlNames: ['Ø®Ø¯ÙŠØ¬Ø©', 'Ø®ÙˆÙ„Ø©', 'Ø®Ù„ÙˆØ¯', 'Ø®ÙŠØ±ÙŠØ©'],
        animals: ['Ø®Ø±ÙˆÙ', 'Ø®Ù†Ø²ÙŠØ±', 'Ø®ÙØ§Ø´', 'Ø®ÙŠÙ„'],
        plants: ['Ø®Ø³', 'Ø®ÙŠØ§Ø±', 'Ø®ÙˆØ®', 'Ø®Ø¨ÙŠØ²Ø©'],
        objects: ['Ø®Ø§ØªÙ…', 'Ø®ÙŠØ·', 'Ø®Ø±ÙŠØ·Ø©', 'Ø®Ø²Ø§Ù†Ø©', 'Ø®ÙŠÙ…Ø©'],
        countries: []
    },
    'Ø¯': {
        boyNames: ['Ø¯Ø§ÙˆØ¯', 'Ø¯Ø§Ù†ÙŠØ§Ù„', 'Ø¯ÙŠØ¨', 'Ø¯Ø±ÙˆÙŠØ´'],
        girlNames: ['Ø¯Ø§Ù†Ø©', 'Ø¯ÙŠÙ†Ø§', 'Ø¯ÙŠÙ…Ø§', 'Ø¯Ø¹Ø§Ø¡', 'Ø¯ÙŠØ§Ù„Ø§', 'Ø¯Ù„Ø§Ù„', 'Ø¯Ø§Ø±ÙŠÙ†'],
        animals: ['Ø¯Ø¬Ø§Ø¬Ø©', 'Ø¯ÙŠÙƒ', 'Ø¯Ø¨', 'Ø¯ÙˆÙ„ÙÙŠÙ†', 'Ø¯ÙˆØ¯Ø©'],
        plants: ['Ø¯Ø±Ø§Ù‚', 'Ø¯ÙˆÙ…', 'Ø¯ÙˆØ§Ø± Ø§Ù„Ø´Ù…Ø³'],
        objects: ['Ø¯ÙØªØ±', 'Ø¯Ø±Ø¬', 'Ø¯ÙˆÙ„Ø§Ø¨', 'Ø¯Ø¨ÙˆØ³', 'Ø¯Ø±Ø§Ø¬Ø©'],
        countries: ['Ø¯Ø¨ÙŠ', 'Ø§Ù„Ø¯Ù†Ù…Ø§Ø±Ùƒ']
    },
    'Ø°': {
        boyNames: ['Ø°ÙŠØ§Ø¨', 'Ø°ÙƒÙŠ'],
        girlNames: ['Ø°ÙƒØ±Ù‰'],
        animals: ['Ø°Ø¦Ø¨', 'Ø°Ø¨Ø§Ø¨Ø©'],
        plants: ['Ø°Ø±Ø©'],
        objects: ['Ø°Ù‡Ø¨'],
        countries: []
    },
    'Ø±': {
        boyNames: ['Ø±Ø§Ù…ÙŠ', 'Ø±Ø§Ø´Ø¯', 'Ø±Ø¶Ø§', 'Ø±ÙŠØ§Ø¶', 'Ø±Ø§Ø¦Ø¯', 'Ø±Ø´ÙŠØ¯', 'Ø±Ø§ÙØª', 'Ø±Ø¨ÙŠØ¹'],
        girlNames: ['Ø±Ù†Ø§', 'Ø±ÙŠÙ…', 'Ø±Ù‡Ù', 'Ø±ÙˆØ§Ù†', 'Ø±ØºØ¯', 'Ø±Ù†ÙŠÙ…', 'Ø±Ø¨Ø§Ø¨', 'Ø±Ø´Ø§', 'Ø±ÙˆØ²', 'Ø±Ø§Ù†ÙŠØ§'],
        animals: ['Ø±Ø®Ù…', 'Ø±ÙŠÙ…'],
        plants: ['Ø±Ù…Ø§Ù†', 'Ø±ÙˆØ²Ù…Ø§Ø±ÙŠ', 'Ø±ÙŠØ­Ø§Ù†'],
        objects: ['Ø±Ø§Ø¯ÙŠÙˆ', 'Ø±Ù', 'Ø±Ù…Ø­', 'Ø±ÙŠÙ…ÙˆØª'],
        countries: ['Ø±ÙˆØ³ÙŠØ§', 'Ø±ÙˆÙ…Ø§Ù†ÙŠØ§', 'Ø±ÙˆØ§Ù†Ø¯Ø§']
    },
    'Ø²': {
        boyNames: ['Ø²ÙŠØ¯', 'Ø²ÙŠØ§Ø¯', 'Ø²Ø§Ù‡Ø±', 'Ø²ÙƒØ±ÙŠØ§', 'Ø²ÙŠÙ†', 'Ø²Ø§Ù‡ÙŠ'],
        girlNames: ['Ø²ÙŠÙ†Ø¨', 'Ø²Ù‡Ø±Ø§Ø¡', 'Ø²ÙŠÙ†Ø©', 'Ø²Ù‡Ø±Ø©', 'Ø²ÙŠÙ†', 'Ø²Ù…Ø²Ù…'],
        animals: ['Ø²Ø±Ø§ÙØ©', 'Ø²ÙˆØ§Ø­Ù', 'Ø²ÙŠØ¨Ø±Ø§'],
        plants: ['Ø²ÙŠØªÙˆÙ†', 'Ø²Ù†Ø¬Ø¨ÙŠÙ„', 'Ø²Ø¹ØªØ±', 'Ø²Ù‡Ø±Ø©'],
        objects: ['Ø²Ø¬Ø§Ø¬', 'Ø²Ø±', 'Ø²Ø¬Ø§Ø¬Ø©', 'Ø²ÙˆØ±Ù‚'],
        countries: ['Ø²ÙŠÙ…Ø¨Ø§Ø¨ÙˆÙŠ', 'Ø²Ø§Ù…Ø¨ÙŠØ§']
    },
    'Ø³': {
        boyNames: ['Ø³Ø§Ù…ÙŠ', 'Ø³Ø¹ÙŠØ¯', 'Ø³Ø§Ù„Ù…', 'Ø³Ù„ÙŠÙ…', 'Ø³Ù„Ø·Ø§Ù†', 'Ø³Ø¹Ø¯', 'Ø³Ù„ÙŠÙ…Ø§Ù†', 'Ø³Ø§Ù…Ø±', 'Ø³ÙÙŠØ§Ù†'],
        girlNames: ['Ø³Ø§Ø±Ø©', 'Ø³Ù„Ù…Ù‰', 'Ø³Ù†Ø§Ø¡', 'Ø³Ù…ÙŠØ©', 'Ø³Ù„Ø³Ø¨ÙŠÙ„', 'Ø³Ù…Ø§', 'Ø³Ù…Ø±', 'Ø³Ù‡ÙŠØ±', 'Ø³Ù‡Ù‰'],
        animals: ['Ø³Ù…ÙƒØ©', 'Ø³Ù„Ø­ÙØ§Ø©', 'Ø³Ù†Ø¬Ø§Ø¨', 'Ø³Ù…Ø§Ù†', 'Ø³Ø­Ù„ÙŠØ©', 'Ø³Ø±Ø·Ø§Ù†'],
        plants: ['Ø³Ø¨Ø§Ù†Ø®', 'Ø³ÙØ±Ø¬Ù„', 'Ø³Ù…Ø§Ù‚'],
        objects: ['Ø³Ø±ÙŠØ±', 'Ø³ÙŠØ§Ø±Ø©', 'Ø³Ø§Ø¹Ø©', 'Ø³Ø¬Ø§Ø¯Ø©', 'Ø³Ù„Ù…', 'Ø³ÙƒÙŠÙ†', 'Ø³ÙÙŠÙ†Ø©', 'Ø³Ù„Ø©'],
        countries: ['Ø³ÙˆØ±ÙŠØ§', 'Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©', 'Ø§Ù„Ø³ÙˆØ¯Ø§Ù†', 'Ø³Ù†ØºØ§ÙÙˆØ±Ø©', 'Ø³ÙˆÙŠØ³Ø±Ø§', 'Ø§Ù„Ø³ÙˆÙŠØ¯', 'Ø³Ø±ÙŠÙ„Ø§Ù†ÙƒØ§']
    },
    'Ø´': {
        boyNames: ['Ø´Ø§Ø¯ÙŠ', 'Ø´Ø§Ù‡Ø±', 'Ø´Ø±ÙŠÙ', 'Ø´ÙƒØ±ÙŠ', 'Ø´Ù‡Ø§Ø¨'],
        girlNames: ['Ø´ÙŠÙ…Ø§Ø¡', 'Ø´Ø°Ù‰', 'Ø´Ù‡Ø¯', 'Ø´ÙŠØ±ÙŠÙ†', 'Ø´Ø±ÙˆÙ‚', 'Ø´Ø§Ø¯ÙŠØ©'],
        animals: ['Ø´Ù…Ø¨Ø§Ù†Ø²ÙŠ', 'Ø´Ø§Ù‡ÙŠÙ†'],
        plants: ['Ø´Ù…Ø§Ù…', 'Ø´Ø¹ÙŠØ±', 'Ø´Ø§ÙŠ'],
        objects: ['Ø´Ø¨Ø§Ùƒ', 'Ø´Ù†Ø·Ø©', 'Ø´Ù…Ø¹', 'Ø´Ù…Ø§Ø¹Ø©', 'Ø´Ø±Ø§Ø¨'],
        countries: []
    },
    'Øµ': {
        boyNames: ['ØµØ§Ù„Ø­', 'ØµÙ„Ø§Ø­', 'ØµÙ‡ÙŠØ¨', 'ØµØ§Ø¯Ù‚', 'ØµØ¨Ø­ÙŠ', 'ØµÙÙˆØ§Ù†'],
        girlNames: ['ØµÙØ§Ø¡', 'ØµØ§Ø¨Ø±ÙŠÙ†', 'ØµÙÙŠØ©', 'ØµØ¨Ø§'],
        animals: ['ØµÙ‚Ø±', 'ØµØ±ØµÙˆØ±'],
        plants: ['ØµØ¨Ø§Ø±', 'ØµÙ†ÙˆØ¨Ø±'],
        objects: ['ØµÙ†Ø¯ÙˆÙ‚', 'ØµØ­Ù†', 'ØµØ§Ø¨ÙˆÙ†', 'ØµÙˆØ±Ø©'],
        countries: ['Ø§Ù„ØµÙŠÙ†', 'Ø§Ù„ØµÙˆÙ…Ø§Ù„']
    },
    'Ø¶': {
        boyNames: ['Ø¶ÙŠØ§Ø¡', 'Ø¶Ø§Ø±ÙŠ', 'Ø¶Ø±ØºØ§Ù…'],
        girlNames: ['Ø¶Ø­Ù‰', 'Ø¶ÙŠ'],
        animals: ['Ø¶Ø¨Ø¹', 'Ø¶ÙØ¯Ø¹'],
        plants: [],
        objects: ['Ø¶ÙˆØ¡'],
        countries: []
    },
    'Ø·': {
        boyNames: ['Ø·Ø§Ø±Ù‚', 'Ø·Ù„Ø§Ù„', 'Ø·Ø§Ù‡Ø±', 'Ø·Ù‡'],
        girlNames: ['Ø·ÙŠÙ', 'Ø·ÙŠØ¨Ø©'],
        animals: ['Ø·Ø§ÙˆÙˆØ³'],
        plants: ['Ø·Ù…Ø§Ø·Ù…', 'Ø·Ø­Ø§Ù„Ø¨'],
        objects: ['Ø·Ø§ÙˆÙ„Ø©', 'Ø·Ø§Ø¦Ø±Ø©', 'Ø·Ø¨Ù„', 'Ø·ÙˆØ¨'],
        countries: []
    },
    'Ø¸': {
        boyNames: ['Ø¸Ø§ÙØ±'],
        girlNames: [],
        animals: ['Ø¸Ø¨ÙŠ'],
        plants: [],
        objects: ['Ø¸Ø±Ù'],
        countries: []
    },
    'Ø¹': {
        boyNames: ['Ø¹Ù…Ø±', 'Ø¹Ù„ÙŠ', 'Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡', 'Ø¹Ø«Ù…Ø§Ù†', 'Ø¹Ø§Ù…Ø±', 'Ø¹Ø¯Ù†Ø§Ù†', 'Ø¹Ù…Ø§Ø¯', 'Ø¹ØµØ§Ù…', 'Ø¹Ø²ÙŠØ²'],
        girlNames: ['Ø¹Ø§Ø¦Ø´Ø©', 'Ø¹Ù„Ø§', 'Ø¹Ø¨ÙŠØ±', 'Ø¹Ù‡Ø¯', 'Ø¹ÙØ§Ù', 'Ø¹Ø²Ø©', 'Ø¹Ù†ÙˆØ¯', 'Ø¹Ø§Ù„ÙŠØ©'],
        animals: ['Ø¹ØµÙÙˆØ±', 'Ø¹Ù‚Ø±Ø¨', 'Ø¹Ù†ÙƒØ¨ÙˆØª', 'Ø¹Ø¬Ù„'],
        plants: ['Ø¹Ù†Ø¨', 'Ø¹Ø¯Ø³', 'Ø¹Ø±Ø¹Ø±'],
        objects: ['Ø¹ØµØ§', 'Ø¹Ù‚Ø¯', 'Ø¹ÙŠÙ†', 'Ø¹Ø¬Ù„Ø©'],
        countries: ['Ø¹Ù…Ø§Ù†', 'Ø§Ù„Ø¹Ø±Ø§Ù‚']
    },
    'Øº': {
        boyNames: ['ØºØ³Ø§Ù†', 'ØºØ§Ø²ÙŠ', 'ØºØ§Ù„Ø¨', 'ØºÙŠØ«'],
        girlNames: ['ØºØ§Ø¯Ø©', 'ØºØ§Ù„ÙŠØ©', 'ØºÙŠØ¯Ø§Ø¡', 'ØºØ²Ù„'],
        animals: ['ØºØ±Ø§Ø¨', 'ØºØ²Ø§Ù„', 'ØºÙˆØ±ÙŠÙ„Ø§'],
        plants: ['ØºØ§Ø±'],
        objects: ['ØºØ·Ø§Ø¡', 'ØºØ±ÙØ©'],
        countries: ['ØºØ§Ù†Ø§', 'ØºÙˆØ§ØªÙŠÙ…Ø§Ù„Ø§', 'ØºÙŠÙ†ÙŠØ§']
    },
    'Ù': {
        boyNames: ['ÙØ§Ø±Ø³', 'ÙÙ‡Ø¯', 'ÙÙŠØµÙ„', 'ÙØ±Ø§Ø³', 'ÙØ§Ø¯ÙŠ', 'ÙÙˆØ§Ø²', 'ÙØ¤Ø§Ø¯'],
        girlNames: ['ÙØ§Ø·Ù…Ø©', 'ÙØ±Ø­', 'ÙØ±ÙŠØ¯Ø©', 'ÙØ§ÙŠØ²Ø©', 'ÙØ¯ÙˆÙ‰', 'ÙØ¯Ø§Ø¡'],
        animals: ['ÙÙŠÙ„', 'ÙÙ‡Ø¯', 'ÙØ£Ø±', 'ÙØ±Ø§Ø´Ø©'],
        plants: ['ÙÙˆÙ„', 'ÙØ¬Ù„', 'ÙØ³ØªÙ‚', 'ÙØ±Ø§ÙˆÙ„Ø©'],
        objects: ['ÙØ±Ù†', 'ÙØ±Ø´Ø§Ø©', 'ÙØ§Ù†ÙˆØ³', 'ÙØ£Ø³'],
        countries: ['ÙÙ„Ø³Ø·ÙŠÙ†', 'ÙØ±Ù†Ø³Ø§', 'ÙÙ†Ù„Ù†Ø¯Ø§', 'Ø§Ù„ÙÙ„Ø¨ÙŠÙ†', 'ÙÙ†Ø²ÙˆÙŠÙ„Ø§']
    },
    'Ù‚': {
        boyNames: ['Ù‚Ø§Ø³Ù…', 'Ù‚ØµÙŠ', 'Ù‚ÙŠØ³', 'Ù‚ØªÙŠØ¨Ø©'],
        girlNames: ['Ù‚Ù…Ø±'],
        animals: ['Ù‚Ø±Ø¯', 'Ù‚Ø·', 'Ù‚Ù†ÙØ°', 'Ù‚Ù†Ø¯ÙŠÙ„'],
        plants: ['Ù‚Ù…Ø­', 'Ù‚Ø±Ù†Ø¨ÙŠØ·', 'Ù‚Ø±Ø¹'],
        objects: ['Ù‚Ù„Ù…', 'Ù‚Ù…ÙŠØµ', 'Ù‚ÙÙ„', 'Ù‚Ø¨Ø¹Ø©', 'Ù‚Ø§Ø±Ø¨'],
        countries: ['Ù‚Ø·Ø±', 'Ù‚Ø¨Ø±Øµ']
    },
    'Ùƒ': {
        boyNames: ['ÙƒØ±ÙŠÙ…', 'ÙƒÙ…Ø§Ù„', 'ÙƒØ±Ù…', 'ÙƒØ§Ù…Ù„'],
        girlNames: ['ÙƒØ±ÙŠÙ…Ø©', 'ÙƒÙˆØ«Ø±', 'ÙƒØ§Ù…ÙŠÙ„ÙŠØ§'],
        animals: ['ÙƒÙ„Ø¨', 'ÙƒÙ†ØºØ±', 'ÙƒÙˆØ§Ù„Ø§'],
        plants: ['ÙƒØ±Ø²', 'ÙƒØ±Ø§Ø«', 'ÙƒÙ…Ø«Ø±Ù‰', 'ÙƒØ²Ø¨Ø±Ø©', 'ÙƒÙŠÙˆÙŠ'],
        objects: ['ÙƒØªØ§Ø¨', 'ÙƒØ±Ø³ÙŠ', 'ÙƒÙˆØ¨', 'ÙƒØ±Ø©'],
        countries: ['Ø§Ù„ÙƒÙˆÙŠØª', 'ÙƒÙ†Ø¯Ø§', 'ÙƒÙˆØ±ÙŠØ§', 'ÙƒÙˆÙ„ÙˆÙ…Ø¨ÙŠØ§', 'ÙƒÙŠÙ†ÙŠØ§']
    },
    'Ù„': {
        boyNames: ['Ù„ÙŠØ«', 'Ù„Ø¤ÙŠ', 'Ù„Ù‚Ù…Ø§Ù†'],
        girlNames: ['Ù„ÙŠÙ„Ù‰', 'Ù„ÙŠÙ†Ø§', 'Ù„Ù…Ù‰', 'Ù„Ø§Ø±Ø§', 'Ù„Ø¨Ù†Ù‰', 'Ù„Ø·ÙŠÙØ©', 'Ù„Ø¬ÙŠÙ†'],
        animals: ['Ù„ÙŠØ«', 'Ù„Ø§Ù…Ø§'],
        plants: ['Ù„ÙŠÙ…ÙˆÙ†', 'Ù„ÙˆØ²', 'Ù„ÙˆØ¨ÙŠØ§'],
        objects: ['Ù„Ù…Ø¨Ø©', 'Ù„ÙˆØ­Ø©'],
        countries: ['Ù„Ø¨Ù†Ø§Ù†', 'Ù„ÙŠØ¨ÙŠØ§', 'Ù„ÙˆÙƒØ³Ù…Ø¨ÙˆØ±Øº']
    },
    'Ù…': {
        boyNames: ['Ù…Ø­Ù…Ø¯', 'Ù…Ø­Ù…ÙˆØ¯', 'Ù…ØµØ·ÙÙ‰', 'Ù…Ø¹Ø§Ø°', 'Ù…Ø§Ù„Ùƒ', 'Ù…Ø±Ø§Ø¯', 'Ù…Ø±ÙˆØ§Ù†', 'Ù…Ù‡Ù†Ø¯', 'Ù…Ø§Ø¬Ø¯', 'Ù…Ù†ÙŠØ±'],
        girlNames: ['Ù…Ø±ÙŠÙ…', 'Ù…Ù„Ùƒ', 'Ù…Ù†Ù‰', 'Ù…ÙŠØ±Ø§', 'Ù…Ø§Ø±ÙŠØ§', 'Ù…Ù‡Ø§', 'Ù…ÙŠØ³', 'Ù…Ø±Ø§Ù…', 'Ù…ÙŠ', 'Ù…Ù†Ø§Ù„'],
        animals: ['Ù…Ø§Ø¹Ø²', 'Ù…Ù‡Ø§', 'Ù…Ø§Ù…ÙˆØ«'],
        plants: ['Ù…ÙˆØ²', 'Ù…Ø§Ù†Ø¬Ùˆ', 'Ù…Ù„ÙˆØ®ÙŠØ©', 'Ù…Ù„ÙÙˆÙ', 'Ù…Ø´Ù…Ø´'],
        objects: ['Ù…ÙØªØ§Ø­', 'Ù…ÙƒØªØ¨', 'Ù…Ø±ÙˆØ­Ø©', 'Ù…Ù„Ø¹Ù‚Ø©', 'Ù…Ù‚Øµ', 'Ù…ØµØ¨Ø§Ø­', 'Ù…Ø±Ø¢Ø©'],
        countries: ['Ù…ØµØ±', 'Ø§Ù„Ù…ØºØ±Ø¨', 'Ù…Ø§Ù„ÙŠØ²ÙŠØ§', 'Ø§Ù„Ù…ÙƒØ³ÙŠÙƒ', 'Ù…ÙˆØ±ÙŠØªØ§Ù†ÙŠØ§']
    },
    'Ù†': {
        boyNames: ['Ù†Ø§Ø¯Ø±', 'Ù†Ø§ØµØ±', 'Ù†Ø¨ÙŠÙ„', 'Ù†ÙˆØ§Ù', 'Ù†Ø§ÙŠÙ', 'Ù†Ø²Ø§Ø±'],
        girlNames: ['Ù†ÙˆØ±', 'Ù†Ø§Ø¯ÙŠØ©', 'Ù†Ù‡Ù‰', 'Ù†Ø¬Ù„Ø§Ø¡', 'Ù†Ø¬ÙˆÙ‰', 'Ù†Ø³Ø±ÙŠÙ†', 'Ù†Ø±Ù…ÙŠÙ†', 'Ù†Ø§Ø¯ÙŠØ§'],
        animals: ['Ù†Ù…Ø±', 'Ù†Ø­Ù„Ø©', 'Ù†Ø¹Ø§Ù…Ø©', 'Ù†Ø³Ø±', 'Ù†Ù…Ù„'],
        plants: ['Ù†Ø¹Ù†Ø§Ø¹', 'Ù†Ø±Ø¬Ø³'],
        objects: ['Ù†Ø§ÙØ°Ø©', 'Ù†Ø¸Ø§Ø±Ø©', 'Ù†Ø¬ÙØ©'],
        countries: ['Ø§Ù„Ù†Ø±ÙˆÙŠØ¬', 'Ù†ÙŠØ¬ÙŠØ±ÙŠØ§', 'Ù†ÙŠÙˆØ²ÙŠÙ„Ù†Ø¯Ø§', 'Ø§Ù„Ù†Ù…Ø³Ø§', 'Ù†ÙŠØ¨Ø§Ù„']
    },
    'Ù‡': {
        boyNames: ['Ù‡Ø§Ù†ÙŠ', 'Ù‡Ø´Ø§Ù…', 'Ù‡ÙŠØ«Ù…', 'Ù‡Ø§Ø¯ÙŠ', 'Ù‡Ù…Ø§Ù…'],
        girlNames: ['Ù‡Ø§Ù„Ø©', 'Ù‡Ø¨Ø©', 'Ù‡Ø¯Ù‰', 'Ù‡Ù†Ø¯', 'Ù‡Ù†Ø§Ø¯ÙŠ', 'Ù‡ÙŠØ§', 'Ù‡ÙŠÙØ§Ø¡'],
        animals: ['Ù‡Ø±', 'Ù‡Ø¯Ù‡Ø¯'],
        plants: ['Ù‡ÙŠÙ„'],
        objects: ['Ù‡Ø§ØªÙ'],
        countries: ['Ù‡ÙˆÙ„Ù†Ø¯Ø§', 'Ø§Ù„Ù‡Ù†Ø¯', 'Ù‡ÙˆÙ†Øº ÙƒÙˆÙ†Øº']
    },
    'Ùˆ': {
        boyNames: ['ÙˆØ§Ø¦Ù„', 'ÙˆÙ„ÙŠØ¯', 'ÙˆØ³Ø§Ù…', 'ÙˆØ³ÙŠÙ…'],
        girlNames: ['ÙˆÙØ§Ø¡', 'ÙˆØ±Ø¯', 'ÙˆØ¹Ø¯', 'ÙˆØ³Ù†', 'ÙˆØ¯Ø§Ø¯'],
        animals: ['ÙˆØ¹Ù„', 'ÙˆØ²Ø©', 'ÙˆØ·ÙˆØ§Ø·'],
        plants: ['ÙˆØ±Ø¯'],
        objects: ['ÙˆØ³Ø§Ø¯Ø©'],
        countries: []
    },
    'ÙŠ': {
        boyNames: ['ÙŠØ§Ø³Ø±', 'ÙŠÙˆØ³Ù', 'ÙŠØ²Ù†', 'ÙŠØ§Ù…Ù†', 'ÙŠØ²ÙŠØ¯', 'ÙŠØ§Ø³ÙŠÙ†', 'ÙŠØ­ÙŠÙ‰'],
        girlNames: ['ÙŠØ§Ø³Ù…ÙŠÙ†', 'ÙŠØ§Ø±Ø§', 'ÙŠØ³Ø±Ù‰', 'ÙŠÙ…Ù†Ù‰', 'ÙŠØ³Ø±'],
        animals: ['ÙŠÙ…Ø§Ù…Ø©', 'ÙŠØ¹Ø³ÙˆØ¨'],
        plants: ['ÙŠÙˆØ³ÙÙŠ', 'ÙŠØ§Ø³Ù…ÙŠÙ†'],
        objects: ['ÙŠØ§Ù‚Ø©'],
        countries: ['Ø§Ù„ÙŠÙ…Ù†', 'Ø§Ù„ÙŠØ§Ø¨Ø§Ù†', 'ÙŠÙˆØºÙˆØ³Ù„Ø§ÙÙŠØ§']
    }
};

let me = JSON.parse(localStorage.getItem("user"));
if (!me) location.href = "login.html";

let params = new URLSearchParams(location.search);
let opponentId = String(params.get("op"));
let gameId = params.get("game");

let opponent;
let myGame;
let currentRound = 1;

// =========================================
// ğŸ”¥ Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®ØµÙ…
// =========================================
$.get(API_URL + "/" + opponentId, function(res){
    opponent = res;
    $("#opponentName").text(opponent.username);
    $("#opFinalName").text(opponent.username);
});

// =========================================
// ğŸ® Ø§Ø®ØªÙŠØ§Ø± Ø­Ø±Ù Ø¹Ø´ÙˆØ§Ø¦ÙŠ
// =========================================
function generateChallenge() {
    let letter = ARABIC_LETTERS[Math.floor(Math.random() * ARABIC_LETTERS.length)];
    return {
        letter: letter,
        category: `Ø§ÙƒØªØ¨ ÙƒÙ„Ù…Ø§Øª ØªØ¨Ø¯Ø£ Ø¨Ø­Ø±Ù: ${letter}`
    };
}

// =========================================
// ğŸ” Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© - Ù…Ø­Ø¯Ù‘Ø«
// =========================================
function checkAnswer(letter, answer, type) {
    if (!answer || answer.trim() === '') return null;
    
    answer = answer.trim();
    
    // âœ… 1. ØªØ­Ù‚Ù‚ Ù…Ù† Ø£Ù† Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ØªØ¨Ø¯Ø£ Ø¨Ø§Ù„Ø­Ø±Ù Ø§Ù„ØµØ­ÙŠØ­
    if (!answer.startsWith(letter)) return false;
    
    // âœ… 2. ØªØ­Ù‚Ù‚ Ù…Ù† Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    if (VALID_ANSWERS[letter]) {
        let validList = VALID_ANSWERS[letter][type] || [];
        
        // âœ… 3. ØªØ·Ø§Ø¨Ù‚ ØªØ§Ù… Ù…Ø¹ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©
        return validList.includes(answer);
    }
    
    // âŒ Ø¥Ø°Ø§ Ø§Ù„Ø­Ø±Ù Ù…Ø´ Ù…ÙˆØ¬ÙˆØ¯ ÙÙŠ Ø§Ù„Ù‚Ø§Ø¹Ø¯Ø©ØŒ Ù†Ø±ÙØ¶ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
    return false;
}

// =========================================
// ğŸ”¥ ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø©
// =========================================
function loadGameData(callback) {
    $.get(API_URL + "/" + me.id, function(user){
        me = user;
        localStorage.setItem("user", JSON.stringify(me));

        me.wordGames = me.wordGames || [];
        myGame = me.wordGames.find(g => g.id === gameId);

        if (!myGame) {
            alert("âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„Ø¹Ø¨Ø©!");
            location.href = "index.html";
            return;
        }

        currentRound = myGame.round || 1;
        $("#roundIndicator").text(`Ø§Ù„Ø¬ÙˆÙ„Ø© ${currentRound} / ${MAX_ROUNDS}`);
        $("#myScore").text(myGame.myScore || 0);
        $("#myName").text(me.username);
        $("#myFinalName").text(me.username);

        if (myGame.status === "invited") {
            myGame.status = "playing";
            myGame.round = 1;
            myGame.myScore = 0;
            myGame.opponentScore = 0;
            saveGame();
        }

        if (myGame.status === "finished") {
            showGameOver();
            return;
        }

        if (callback) callback();
    });
}

// =========================================
// ğŸ® Ø¹Ø±Ø¶ Ø§Ù„ØªØ­Ø¯ÙŠ
// =========================================
function renderChallenge() {
    $.get(API_URL + "/" + opponentId, function(fr){
        let hisGame = fr.wordGames?.find(g => g.id === gameId);
        
        // Ø¥Ø°Ø§ Ù…Ø§ ÙÙŠ ØªØ­Ø¯ÙŠ
        if (!myGame.challenge && (!hisGame || !hisGame.challenge)) {
            // Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„ ÙŠÙˆÙ„Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠ
            if (String(me.id) < String(opponentId)) {
                let challenge = generateChallenge();
                myGame.challenge = challenge;
                myGame.myAnswers = null;
                myGame.myAnswerTime = null;
                saveGame();
            } else {
                $("#letterBox").html("â³");
                $("#categoryBox").text("Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„ØªØ­Ø¯ÙŠ...");
                return;
            }
        }
        // Ø¥Ø°Ø§ ÙÙŠ ØªØ­Ø¯ÙŠ Ø¹Ù†Ø¯Ù‡ ÙˆÙ…Ø§ Ø¹Ù†Ø¯ÙŠ
        else if (!myGame.challenge && hisGame && hisGame.challenge) {
            myGame.challenge = hisGame.challenge;
            myGame.myAnswers = null;
            myGame.myAnswerTime = null;
            saveGame();
        }

        $("#letterBox").text(myGame.challenge.letter);
        $("#categoryBox").text(myGame.challenge.category);

        if (myGame.myAnswers) {
            $("#myStatus").html("âœ… Ø£Ø±Ø³Ù„Øª");
            $("#submitBtn").prop("disabled", true);
            $("input").prop("disabled", true);
        } else {
            $("#myStatus").html("â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„ÙƒØªØ§Ø¨Ø©...");
            $("#submitBtn").prop("disabled", false);
            $("input").prop("disabled", false);
        }
    });
}

// =========================================
// ğŸ”¥ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª
// =========================================
function sendAnswers() {
    if (myGame.myAnswers) {
        alert("Ù„Ù‚Ø¯ Ø£Ø±Ø³Ù„Øª Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ø§Ù„ÙØ¹Ù„!");
        return;
    }

    let answers = {
        boyName: $("#boyName").val().trim(),
        girlName: $("#girlName").val().trim(),
        animal: $("#animal").val().trim(),
        plant: $("#plant").val().trim(),
        object: $("#object").val().trim(),
        country: $("#country").val().trim()
    };

    myGame.myAnswers = answers;
    myGame.myAnswerTime = Date.now();
    
    $("input").prop("disabled", true);
    $("#submitBtn").prop("disabled", true);
    $("#myStatus").html("âœ… Ø£Ø±Ø³Ù„Øª");
    
    saveGame();
}

// =========================================
// ğŸ”¥ Ø­ÙØ¸ Ø§Ù„Ù„Ø¹Ø¨Ø©
// =========================================
function saveGame() {
    $.ajax({
        url: API_URL + "/" + me.id,
        method: "PUT",
        contentType: "application/json",
        data: JSON.stringify(me),
        success: function() {
            $.get(API_URL + "/" + opponentId, function(fr){
                fr.wordGames = fr.wordGames || [];

                let g2 = fr.wordGames.find(g => g.id === gameId);

                if (g2) {
                    g2.status = myGame.status;
                    g2.round = myGame.round;
                    g2.challenge = myGame.challenge;
                    g2.opponentAnswers = myGame.myAnswers;
                    g2.opponentAnswerTime = myGame.myAnswerTime;
                    g2.opponentScore = myGame.myScore;
                }

                $.ajax({
                    url: API_URL + "/" + opponentId,
                    method: "PUT",
                    contentType: "application/json",
                    data: JSON.stringify(fr)
                });
            });
        }
    });
}

// =========================================
// ğŸ¯ ÙØ­Øµ Ø§Ù„ÙØ§Ø¦Ø²
// =========================================
function checkWinner() {
    $.get(API_URL + "/" + opponentId, function(fr){
        let hisGame = fr.wordGames?.find(g => g.id === gameId);
        if (!hisGame) return;

        let myAnswers = myGame.myAnswers;
        let opAnswers = hisGame.myAnswers;

        $("#opponentScore").text(hisGame.myScore || 0);

        if (opAnswers) {
            $("#opponentStatus").html("âœ… Ø£Ø±Ø³Ù„");
        } else {
            $("#opponentStatus").html("â³ ÙŠÙ†ØªØ¸Ø±...");
        }

        if (!myAnswers || !opAnswers) return;

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·
        let letter = myGame.challenge.letter;
        
        let myPoints = 0;
        let opPoints = 0;
        
        let resultsHTML = '<div class="result-box"><h3>Ø§Ù„Ù†ØªØ§Ø¦Ø¬:</h3>';
        
        const categories = [
            { key: 'boyName', label: 'Ø§Ø³Ù… ÙˆÙ„Ø¯', type: 'boyNames' },
            { key: 'girlName', label: 'Ø§Ø³Ù… Ø¨Ù†Øª', type: 'girlNames' },
            { key: 'animal', label: 'Ø­ÙŠÙˆØ§Ù†', type: 'animals' },
            { key: 'plant', label: 'Ù†Ø¨Ø§Øª', type: 'plants' },
            { key: 'object', label: 'Ø¬Ù…Ø§Ø¯', type: 'objects' },
            { key: 'country', label: 'Ø¨Ù„Ø§Ø¯', type: 'countries' }
        ];

        categories.forEach(cat => {
            let myAns = myAnswers[cat.key];
            let opAns = opAnswers[cat.key];
            
            let myCorrect = checkAnswer(letter, myAns, cat.type);
            let opCorrect = checkAnswer(letter, opAns, cat.type);
            
            if (myCorrect === true && opCorrect === true) {
                myPoints++;
                opPoints++;
                resultsHTML += `<div class="result-item correct">âœ… ${cat.label}: Ø£Ù†Øª (${myAns}) â€¢ Ø§Ù„Ø®ØµÙ… (${opAns})</div>`;
            } else if (myCorrect === true) {
                myPoints++;
                resultsHTML += `<div class="result-item correct">âœ… ${cat.label}: ${myAns}</div>`;
            } else if (myCorrect === false) {
                resultsHTML += `<div class="result-item wrong">âŒ ${cat.label}: ${myAns || 'ÙØ§Ø±Øº'} (Ø®Ø·Ø£)</div>`;
            } else {
                resultsHTML += `<div class="result-item empty">âš ï¸ ${cat.label}: ÙØ§Ø±Øº</div>`;
            }
        });
        
        resultsHTML += '</div>';
        $("#resultBox").html(resultsHTML).show();

        // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø±Ø¹Ø©
        let myTime = myGame.myAnswerTime || 0;
        let opTime = hisGame.myAnswerTime || 0;
        
        let speedBonus = 0;
        let winnerBox = $("#winnerBox");
        
        if (myPoints > 0 && opPoints > 0 && myTime < opTime) {
            speedBonus = 1;
            myPoints += speedBonus;
        }

        myGame.myScore = (myGame.myScore || 0) + myPoints;
        
        if (myPoints > opPoints) {
            winnerBox.html(`ğŸ† ÙØ²Øª Ø¨Ù€ ${myPoints} Ù†Ù‚Ø·Ø©!` + (speedBonus ? ' âš¡ +1 Ù„Ù„Ø³Ø±Ø¹Ø©!' : '')).removeClass().addClass("winner win").show();
        } else if (opPoints > myPoints) {
            winnerBox.html(`âŒ Ø§Ù„Ø®ØµÙ… ÙØ§Ø² Ø¨Ù€ ${opPoints} Ù†Ù‚Ø·Ø©!`).removeClass().addClass("winner lose").show();
        } else {
            winnerBox.html(`ğŸ¤ ØªØ¹Ø§Ø¯Ù„! ÙƒÙ„ ÙˆØ§Ø­Ø¯ ${myPoints} Ù†Ù‚Ø·Ø©`).removeClass().addClass("winner draw").show();
        }

        $("#myScore").text(myGame.myScore || 0);

        if (currentRound >= MAX_ROUNDS) {
            setTimeout(() => {
                myGame.status = "finished";
                saveGame();
                showGameOver();
            }, 5000);
        } else {
            setTimeout(() => {
                myGame.challenge = null;
                myGame.round = (myGame.round || 1) + 1;
                myGame.myAnswers = null;
                myGame.myAnswerTime = null;
                
                $("input").val("").prop("disabled", false);
                $("#submitBtn").prop("disabled", false);
                $("#resultBox").hide();
                $("#winnerBox").hide();
                $("#myStatus").html("Ø¬Ø§Ù‡Ø²");
                $("#opponentStatus").html("Ø¨Ø§Ù†ØªØ¸Ø§Ø±...");
                
                saveGame();
                
                setTimeout(() => {
                    loadGameData(renderChallenge);
                }, 800);
            }, 5000);
        }
    });
}

// =========================================
// ğŸ Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
// =========================================
function endGame() {
    if (!confirm("Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©ØŸ")) return;

    myGame.status = "finished";
    saveGame();
    
    setTimeout(() => {
        showGameOver();
    }, 500);
}

// =========================================
// ğŸ† Ø¹Ø±Ø¶ Ø´Ø§Ø´Ø© Ø§Ù„Ù†Ù‡Ø§ÙŠØ©
// =========================================
function showGameOver() {
    $.get(API_URL + "/" + opponentId, function(fr){
        let hisGame = fr.wordGames?.find(g => g.id === gameId);
        
        let myScore = myGame.myScore || 0;
        let opScore = hisGame?.myScore || 0;

        $("#gameArea").hide();
        $("#endGameBtn").hide();
        $("#gameOverBox").show();

        $("#myFinalScore").text(myScore);
        $("#opFinalScore").text(opScore);

        let resultBox = $("#finalResult");

        if (myScore > opScore) {
            resultBox.html("ğŸ† Ø£Ù†Øª Ø§Ù„ÙØ§Ø¦Ø²!").removeClass().addClass("final-result win");
        } else if (opScore > myScore) {
            resultBox.html("âŒ Ø®Ø³Ø±Øª Ø§Ù„Ù„Ø¹Ø¨Ø©!").removeClass().addClass("final-result lose");
        } else {
            resultBox.html("ğŸ¤ ØªØ¹Ø§Ø¯Ù„!").removeClass().addClass("final-result draw");
        }
    });
}

// ==============================
// ğŸ¯ ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ
// ==============================
setInterval(function(){
    if (myGame && myGame.status !== "finished") {
        loadGameData(() => {
            renderChallenge();
            checkWinner();
        });
    }
}, 2000);

loadGameData(renderChallenge);

</script>

</body>
</html>